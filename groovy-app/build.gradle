plugins {
    id 'groovy'
    id 'application'
}

java {
    sourceCompatibility = JavaVersion.VERSION_17
    targetCompatibility = JavaVersion.VERSION_17
}

dependencies {
    implementation project(':java-lib')
    implementation 'org.apache.groovy:groovy:5.0.3'
}

application {
    mainClass = 'com.example.ChildClass'
}

// Pass the useBuggyAnnotation property to the Groovy compiler
tasks.withType(GroovyCompile).configureEach {
    if (project.hasProperty('useBuggyAnnotation')) {
        groovyOptions.fork = true
        groovyOptions.forkOptions.jvmArgs = ['-DuseBuggyAnnotation=true']
    }
}
